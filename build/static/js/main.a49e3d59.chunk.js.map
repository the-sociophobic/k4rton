{"version":3,"sources":["img/lock.svg","panels/Home.js","utils/utils.js","panels/Feed.js","components/PayWall.js","components/AppState.js","panels/Article.js","panels/SubscribePage.js","panels/GetOneArticle.js","panels/ChannelPreview.js","panels/PublisherAccount.js","utils/navigator.js","panels/ArticleEditor.js","App.js","sw.js","index.js"],"names":["module","exports","__webpack_require__","p","Home","platform","props","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","_this","react_default","a","createElement","vkui","id","className","level","onClick","open","React","Component","getUrlData","urlData","window","location","hash","length","substr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","split","Symbol","iterator","next","done","hashPart","value","includes","err","return","tagColor","tag","stylishColors","forEach","char","index","charCodeAt","changeDataInUrl","dataDif","newHash","substring","connect","send","setUrlData","assign","Feed","state","articles","selectedTags","popularTags","_this2","axios","get","then","res","setState","data","article","tags","findIndex","tagg","push","popularity","toConsumableArray","slice","concat","sort","b","filter","map","catch","e","indexOf","_this3","style","margin","background","color","boxShadow","toggleTag","_this4","text","find","node","type","pics","setArticle","title","src","width","renderTags","_this5","reduce","renderArticleListing","_this6","theme","onChange","renderArticles","PayWall","lock","part","goToGetArticlePage","goToSubscribePage","defaultState","subscribingProcess","selected","publishers","periodType","appState","createContext","globalStateProvider","setGlobalState","newState","getGlobalState","Provider","children","AppState","Consumer","osname","Article","result","newGlobalState","publisher","price","manuallyChanged","articleNodes","Fragment","i","payWall","size","slideWidth","display","bullets","pic","height","components_PayWall","left","goBack","IOS","chevron_back_default","back_default","genArticle","availiblePeriods","SubscribePage","code","tab","searchOpened","label","description","subscribers","globalState","console","log","sumPrice","discount","noShadow","right","search_default","top","bottom","step","min","max","Number","oldState","item","isTag","priceTimeFactor","splice","Math","round","toLowerCase","stopPropagation","preview","info_outline_default","GetOneArticle","NewsChannelDescription","isSelected","PublisherAccount","name","profit","es","labels","datasets","backgroundColor","path","initOpenAllowed","onInitRedirect","callSubscribers","_i","subscriber","navigator","subscribe","func","go","page","back","init","options","ArticleEditor","quillRef","createRef","editor","newTag","newTagModalVisible","rawContentState","convertToRaw","getCurrentContent","markup","draftToMarkdown","react_draft_wysiwyg","editorState","toolbarClassName","wrapperClassName","editorClassName","onEditorStateChange","toolbar","editorToolBar","save","v","h","target","inline","inDropdown","component","dropdownClassName","bold","icon","Editor","italic","blockType","list","unordered","ordered","indent","outdent","textAlign","center","justify","colorPicker","popupClassName","colors","link","showOpenOptionOnHover","defaultTargetOption","unlink","emoji","emojis","image","urlEnabled","uploadEnabled","alignmentEnabled","uploadCallback","previewImage","inputAccept","alt","present","mandatory","defaultSize","history","undo","redo","App","panel","activePanel","fetchedUser","currentArticle","get-one-article","channel-preview","preview-feed","UrlData","alert","JSON","stringify","detail","panels_Home","panels_Feed","panels_Article","user","panels_SubscribePage","articleData","currentArticleData","panels_GetOneArticle","ChannelPreview","panels_PublisherAccount","panels_ArticleEditor","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","error","isLocalhost","Boolean","hostname","match","URL","process","origin","addEventListener","fetch","response","status","headers","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.a49e3d59.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/lock.c6371603.svg\";","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Panel, PanelHeader, HeaderButton, platform, IOS, Group, Div, Header, Gallery, Button} from '@vkontakte/vkui';\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nconst osname = platform();\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n  render() {\n    return  (<Panel id={this.props.id}>\n              <PanelHeader>\n                Home page\n              </PanelHeader>\n              <Div>\n                <Button className=\"pay-subscribtion\" level=\"outline\" onClick={() => this.props.open('article')}>Идти к персику</Button>\n              </Div>\n            </Panel>)\n  }\n}\n\nexport default Home;\n","import connect from '@vkontakte/vkui-connect';\r\n\r\nexport const getUrlData = () => {\r\n  const urlData = {};\r\n\r\n  if (window.location.hash.length > 0) {\r\n    const hash = window.location.hash.substr(1);\r\n    for (let hashPart of hash.split('&')) {\r\n      if (hashPart.includes('='))\r\n        urlData[hashPart.split('=')[0]] = hashPart.split('=')[1]\r\n    }\r\n  }\r\n\r\n  return urlData;\r\n}\r\n\r\nexport const clamp = (a, min, max) => {\r\n  return Math.min(max, Math.max(a, min));\r\n}\r\n\r\nexport const tagColor0 = (tag) => {\r\n  const k = 23;\r\n  let string = \"\";\r\n\r\n  for (let i = 0; i < 3; i++)\r\n    string += tag.charAt((i * k) % tag.length);\r\n  console.log(string);\r\n  //Hash function\r\n  return \"#\" + string.split('')\r\n    .map((char, index) =>\r\n      Math.floor(clamp((((string.charCodeAt(index) % k) / k) * 255), 70, 220)).toString(16)\r\n    ).reduce((a, b) => a + b);\r\n}\r\n\r\nexport const tagColor = (tag) => {\r\n  const stylishColors = [\"2770f1\", \"3fb0ac\", \"ba9077\", \"729f98\", \"6534ff\", \"62bcfa\", \"e05038\", \"dc3966\", \"026f52\", \"f36523\", \"e70247\", \"07a5a4\", \"4bae54\", \"c75696\", \"db3849\"];\r\n  const k = 17;\r\n  let hash = 0;\r\n\r\n  tag.split('').forEach((char, index) => {\r\n    hash = hash * k + tag.charCodeAt(index)\r\n    if (index % 4 == 3)\r\n      hash = hash % stylishColors.length;\r\n  });\r\n\r\n  return \"#\" + stylishColors[hash % stylishColors.length];\r\n}\r\n\r\nexport const setUrlData = (urlData) => {\r\n  let newHash = ''\r\n  for (let hashPart in urlData) {\r\n    newHash += hashPart + '=' + urlData[hashPart] + '&'\r\n  }\r\n  const hash = newHash.substring(0, newHash.length - 1)\r\n  connect.send(\"VKWebAppSetLocation\", {\"location\": hash});\r\n  window.location.hash = '#' + hash\r\n}\r\n\r\nexport const changeDataInUrl = (dataDif) => {\r\n  const newUrlData = Object.assign(getUrlData(), dataDif)\r\n  setUrlData(newUrlData)\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Panel, PanelHeader, HeaderButton, platform, IOS, Group, Div, Header, Gallery, Spinner, Footer, Cell, Search, HorizontalScroll, Button} from '@vkontakte/vkui';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nimport axios from 'axios'\r\n\r\nimport { tagColor } from './../utils/utils'\r\n\r\nconst osname = platform();\r\n\r\nclass Feed extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      articles: null,\r\n      value: \"\",\r\n      selectedTags: [],\r\n      popularTags: [],\r\n    }\r\n  }\r\n\r\n\r\n  componentWillReceiveProps (props) {\r\n    axios.get('/articles.json').then(res => {\r\n      this.setState({articles: res.data});\r\n      let popularTags = [];\r\n      res.data.forEach(article => {\r\n        article.tags.forEach(tag => {\r\n          let index = popularTags.findIndex(tagg => tagg.tag == tag);\r\n\r\n          if (index === -1)\r\n            popularTags.push({tag: tag, popularity: 1});\r\n          else\r\n            popularTags = [\r\n              ...popularTags.slice(0, index),\r\n              {tag: tag, popularity: (popularTags[index].popularity + 1)},\r\n              ...popularTags.slice(index + 1)\r\n            ];\r\n        });\r\n      });\r\n      popularTags = popularTags\r\n      .sort((a, b) => b.popularity - a.popularity)\r\n      .filter(tag => tag.popularity > 1)\r\n      .map(tag => tag.tag);\r\n      this.setState({popularTags: popularTags});\r\n    }).catch((e) => {\r\n      this.setState({\r\n        articles: [],\r\n      })\r\n    })\r\n  }\r\n\r\n  toggleTag(tag) {\r\n    let tags = this.state.selectedTags;\r\n    let index = this.state.selectedTags.indexOf(tag);\r\n    if (index == -1)\r\n      tags.push(tag);\r\n    else\r\n      tags = [...tags.slice(0, index), ...tags.slice(index + 1)];\r\n    this.setState({selectedTags: tags});\r\n  }\r\n\r\n  renderTags(tags) {\r\n    return (\r\n      <HorizontalScroll>\r\n      {\r\n        tags.map(tag => {\r\n          let style = {};\r\n          if (this.state.selectedTags.includes(tag))\r\n            style = {\r\n              margin: \"0 5px\",\r\n              background: tagColor(tag),\r\n              color: \"white\",\r\n            };\r\n          else\r\n            style = {\r\n              margin: \"0 5px\",\r\n              background: \"rgba(1, 1, 1, 0)\",\r\n              color: tagColor(tag),\r\n              boxShadow: \"inset 0px 0px 0px 2px \" + tagColor(tag),\r\n            };\r\n\r\n          return (\r\n            <Button\r\n              onClick={() => this.toggleTag(tag)}\r\n              style={style}\r\n            >\r\n              #{tag}\r\n            </Button>\r\n          );\r\n        })\r\n      }\r\n      </HorizontalScroll>\r\n    );\r\n  }\r\n\r\n  renderArticleListing(article) {\r\n    let text = article.article.find(node => node.type == \"text\") || {text: \"\"};\r\n    let pics = article.article.find(node => node.type == \"gallery\");\r\n\r\n    return (\r\n      <Group>\r\n        <Div onClick={() => {\r\n          this.props.setArticle(article.id);\r\n          this.props.open(\"article\");\r\n        }}>\r\n          <h3 style={{margin: \"0px 0\"}}>{article.title}</h3>\r\n          {/* {\r\n            !pics ? \"\" :\r\n              <Gallery\r\n                slideWidth=\"100%\"\r\n                style={{ height: \"auto\", width: \"100%\" }}\r\n                bullets=\"dark\"\r\n              >\r\n                {pics.pics.map(pic => <img src={pic}/>)}\r\n              </Gallery>\r\n          } */}\r\n          {pics.pics.length > 0 ? <img src={pics.pics[0]} style={{width: \"100%\"}} /> : \"\"}\r\n          <p>{text.text}</p>\r\n        </Div>\r\n        <Cell>\r\n          <small>Теги:</small>\r\n          {this.renderTags(article.tags)}\r\n        </Cell>\r\n      </Group>\r\n    );\r\n  }\r\n  \r\n  renderArticles() {\r\n    if (this.state.articles == null)\r\n      return <Div><Spinner /></Div>;\r\n    if (this.state.articles.length == 0)\r\n      return <Footer>нет новостей</Footer>;\r\n    return this.state.articles\r\n    .filter(article =>\r\n      (\r\n        this.state.selectedTags.length == 0 ||\r\n        this.state.selectedTags.map(tag => article.tags.includes(tag)).reduce((a, b) => a || b)\r\n      ) && (\r\n        article.title.includes(this.state.value) ||\r\n        article.article.map(node => node.type ==\"text\" && node.text.includes(this.state.value)).reduce((a, b) => a || b) ||\r\n        article.tags.map(tag => tag.includes(this.state.value)).reduce((a, b) => a || b)\r\n      )\r\n    )\r\n    .map(article => this.renderArticleListing(article));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Panel id=\"feed\">\r\n        <PanelHeader>\r\n          Новости\r\n        </PanelHeader>\r\n        <Search theme=\"default\" onChange={value => this.setState({value: value})} />\r\n        <Div>\r\n          <small>Популярные теги:</small>\r\n        </Div>\r\n        <Cell>\r\n          {this.renderTags(this.state.popularTags)}\r\n        </Cell>\r\n        {this.renderArticles()}\r\n      </Panel>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Feed;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Panel, PanelHeader, HeaderButton, platform, IOS, Div, Group, Button} from '@vkontakte/vkui';\r\nimport Icon16Lock from '@vkontakte/icons/dist/16/lock';\r\nimport lock from '../img/lock.svg';\r\n\r\nconst osname = platform();\r\n\r\nclass PayWall extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n  render() {\r\n    return   <Div>\r\n               <img className=\"lock-icon\" src={lock}/>\r\n               <Div className=\"payWall-title\">Вы видете только {this.props.part ? (this.props.part + '%') : 'часть'} статьи,<br />чтобы  прочитать её полностью вы можете:</Div>\r\n               <Div className=\"double-buttons\">\r\n                 <Button level=\"outline\" onClick={() => this.props.goToGetArticlePage()}>Получить доступ к этой статье</Button>\r\n                 <Button onClick={() => this.props.goToSubscribePage()}>Оформить гибкую подписку</Button>\r\n               </Div>\r\n             </Div>\r\n  }\r\n}\r\n\r\nexport default PayWall","import React from 'react'\r\n\r\nconst defaultState = {\r\n  article: {},\r\n  subscribingProcess: {\r\n    selected: {\r\n      tags: [],\r\n      publishers: []\r\n    },\r\n    periodType: 1\r\n  }\r\n}\r\nconst appState = React.createContext(defaultState)\r\n\r\n\r\nclass globalStateProvider extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    window.setGlobalState = (newState) => {\r\n      if (typeof newState === 'function') {\r\n        this.setState(newState(Object.assign({}, this.state)))\r\n      } else {\r\n        this.setState(newState)\r\n      }\r\n    }\r\n    window.getGlobalState = () => Object.assign({}, this.state)\r\n  }\r\n  componentDidMount() {\r\n    this.setState(defaultState)\r\n  }\r\n  render() {\r\n    return  <appState.Provider value={this.state}>\r\n              {this.props.children}\r\n            </appState.Provider>\r\n  }\r\n}\r\n//              <appState.Consumer>((change) => this.changeListeners.forEach(func => func(change)))</appState.Consumer>\r\n\r\nexport default {\r\n  Consumer: appState.Consumer,\r\n  Provider: globalStateProvider,\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Panel, PanelHeader, HeaderButton, platform, IOS, Group, Div, Header, Gallery, Spinner} from '@vkontakte/vkui';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nimport axios from 'axios'\r\n\r\nimport PayWall from '../components/PayWall.js'\r\nimport AppState from '../components/AppState'\r\n\r\nconst osname = platform();\r\n\r\nclass Article extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      article: null\r\n    }\r\n  }\r\n  componentWillReceiveProps (props) {\r\n    if (props.article !== null && (this.state.article === null || this.state.article.title !== props.article.title)) {\r\n      axios.get('https://agentstvo-adv.ru:3000/api/getNews').then(res => {\r\n        // console.log(res)\r\n        const data = res.data.result\r\n        this.setState({article: data})\r\n        const newGlobalState = {\r\n          article: {\r\n            tags: data.tags,\r\n            publisher: data.publisher,\r\n            title: data.title,\r\n            price: data.price,\r\n          }\r\n        }\r\n        if (!window.getGlobalState().subscribingProcess.manuallyChanged)\r\n          newGlobalState.subscribingProcess = {\r\n            selected: {\r\n              tags: data.tags,\r\n              publishers: [data.publisher]\r\n            }\r\n          }\r\n        newGlobalState.subscribingProcess.periodType = window.getGlobalState().subscribingProcess.periodType\r\n        window.setGlobalState(newGlobalState)\r\n      }).catch((e) => {\r\n        this.setState({article: {\r\n          title: 'Упс...',\r\n          article: [{\r\n            type: 'text',\r\n            text: 'Произошла ошибка при загрузке статьи'\r\n          }, {\r\n            type: 'text',\r\n            text: 'Подробности в консоли'\r\n          }]\r\n        }})\r\n      })\r\n    }\r\n  }\r\n  genArticle(articleNodes) {\r\n    return  <React.Fragment>\r\n              {this.state.article.article.map((node, i) => {\r\n                const className = i === this.state.article.article.length - 1 && this.state.article.payWall && 'last-text-block'\r\n                switch(node.type) {\r\n                  case 'text':\r\n                    return <Div className={className}>{node.text}</Div>\r\n                    break\r\n                  case 'header':\r\n                    return <Header className={className} level={node.size ? (node.size + '') : '1'}>{node.text}</Header>\r\n                    break\r\n                  case 'gallery':\r\n                    return <Gallery\r\n                        className={className}\r\n                        slideWidth=\"100%\"\r\n                        // style={{ height: 500, width: 600 }}\r\n                        style={{display: \"table\"}}\r\n                        bullets=\"dark\"\r\n                      >{node.pics.map(pic => <img src={pic} style={{width: \"100%\", height: \"auto\"}} /> )}</Gallery>\r\n                    break\r\n                  default:\r\n                    return <Div className={className}>Error, unkonw node type: {node.type}</Div>\r\n                }\r\n              })}\r\n              {this.state.article.payWall && <PayWall\r\n                part={this.state.article.payWall}\r\n                goToGetArticlePage={() => this.props.open('get-one-article')}\r\n                goToSubscribePage={() => this.props.open('subscribe')}\r\n              />}\r\n            </React.Fragment>\r\n  }\r\n  render() {\r\n\r\n    return  (<Panel id={this.props.id}>\r\n              <PanelHeader\r\n                left={<HeaderButton onClick={this.props.goBack}>\r\n                  {osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n                </HeaderButton>}\r\n              >\r\n                {this.state.article != null ? this.state.article.title : 'Загрузка статьи...'}\r\n              </PanelHeader>\r\n              {this.state.article != null ?\r\n                <Group>{this.genArticle(this.state.article)}</Group> :\r\n                <Div><Spinner /></Div>}\r\n            </Panel>)\r\n  }\r\n}\r\n\r\n// const Persik = props => (\r\n// );\r\n\r\n// Persik.propTypes = {\r\n//   id: PropTypes.string.isRequired,\r\n//   go: PropTypes.func.isRequired,\r\n// };\r\n\r\nexport default Article;\r\n","import React from 'react';\r\nimport {Panel, PanelHeader, HeaderButton, platform, Div, Popout, FormLayout, Cell, List, Group, Search, FormLayoutGroup, Input, osname, InfoRow, IOS, Button, Link, Slider, Tabs, TabsItem} from '@vkontakte/vkui';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nimport Icon24Search from '@vkontakte/icons/dist/24/search';\r\nimport Icon28Info from '@vkontakte/icons/dist/28/info_outline';\r\nimport AppState from '../components/AppState'\r\n\r\nconst availiblePeriods = ['Неделя', 'Две недели', 'Месяц', '6 Месяцев', 'Год', '5 лет']\r\n\r\nclass SubscribePage extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      code: '',\r\n      tab: 'publishers',\r\n      searchOpened: false,\r\n      filter: '',\r\n      tags: [{\r\n        label: 'политика',\r\n        pic: 'https://www.telegraf-spb.ru/published/publicdata/B622311/attachments/SC/products_pictures/united-states-flag_enl.jpg',\r\n        description: 'Lorem ipsum dolor sit amet',\r\n        subscribers: 10,\r\n        publishers: ['Бумага', 'Лентач'],\r\n        price: 123\r\n      }, {\r\n        label: 'политика',\r\n        pic: 'https://www.telegraf-spb.ru/published/publicdata/B622311/attachments/SC/products_pictures/united-states-flag_enl.jpg',\r\n        description: 'Lorem ipsum dolor sit amet',\r\n        subscribers: 12,\r\n        publishers: ['Бумага', 'Лентач'],\r\n        price: 123\r\n      }, {\r\n        label: 'политика',\r\n        pic: 'https://www.telegraf-spb.ru/published/publicdata/B622311/attachments/SC/products_pictures/united-states-flag_enl.jpg',\r\n        description: 'Lorem ipsum dolor sit amet',\r\n        subscribers: 8,\r\n        publishers: ['Бумага', 'Лентач'],\r\n        price: 123\r\n      }, {\r\n        label: 'политика',\r\n        pic: 'https://www.telegraf-spb.ru/published/publicdata/B622311/attachments/SC/products_pictures/united-states-flag_enl.jpg',\r\n        description: 'Lorem ipsum dolor sit amet',\r\n        subscribers: 7,\r\n        publishers: ['Бумага', 'Лентач'],\r\n        price: 123\r\n      }],\r\n      publishers: [{\r\n        label: 'Бумага',\r\n        pic: 'https://www.telegraf-spb.ru/published/publicdata/B622311/attachments/SC/products_pictures/united-states-flag_enl.jpg',\r\n        description: 'Бумага, рвётся, горит, делается из трёх тростников',\r\n        subscribers: 11,\r\n        price: 123\r\n      }, {\r\n        label: 'Лентач',\r\n        pic: 'https://www.telegraf-spb.ru/published/publicdata/B622311/attachments/SC/products_pictures/united-states-flag_enl.jpg',\r\n        description: 'Бумага, рвётся, горит, делается из трёх тростников',\r\n        subscribers: 11,\r\n        price: 123\r\n      }],\r\n    }\r\n  }\r\n  // componentDidMount() {\r\n  //   const newState = {selected: {}}\r\n  //   const globalState = window.getGlobalState()\r\n  //   if (globalState.article.publisher)\r\n  //     newState.selected.publishers = [globalState.article.publisher]\r\n  //   if (globalState.article.tags)\r\n  //     newState.selected.tags = globalState.article.tags\r\n  //   this.setState(newState)\r\n  // }\r\n  render() {\r\n    return (\r\n        <AppState.Consumer>\r\n        {(globalState) => {\r\n          const state = globalState.subscribingProcess\r\n          console.log(state)\r\n          let sumPrice = 0\r\n          let discount = 0\r\n          if (state.selected.publishers.length + state.selected.tags.length > 1) {\r\n            discount = (state.selected.publishers.length + state.selected.tags.length) / 15\r\n            if (discount > 0.5)\r\n              discount = 0.5\r\n          }\r\n          return  (<Panel id={this.props.id}>\r\n                    <PanelHeader\r\n                      left={<HeaderButton onClick={this.props.goBack}>\r\n                        {osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n                      </HeaderButton>}\r\n                      noShadow={true}\r\n                      right={\r\n                        <HeaderButton onClick={this.props.goBack}>\r\n                          <Icon24Search />\r\n                        </HeaderButton>\r\n                      }\r\n                    >\r\n                      Гибкая подписка\r\n                    </PanelHeader>\r\n                    <Search theme=\"default\" onChange={value => this.setState({filter: value})} value={this.state.filter} />\r\n                    <FormLayout>\r\n                      {/*<FormLayoutGroup top=\"Ваш промокод\" bottom=\"Промокод позволит Вам получить скидку или период бесплатный подписки\">\r\n                        <Input value={this.state.period} onChange={value=>{this.setState({ code: value })}} />\r\n                      </FormLayoutGroup>*/}\r\n                      <Group top={\"Интервал подписки: \" + availiblePeriods[state.periodType - 1]} bottom={''/*'Подписка оформляется на выбранный период'*/}>\r\n                        <List>\r\n                          <Cell>\r\n                            <Slider\r\n                              step={1}\r\n                              min={0}\r\n                              max={availiblePeriods.length}\r\n                              value={Number(state.periodType)}\r\n                              onChange={value => window.setGlobalState((oldState) => { \r\n                                oldState.subscribingProcess.periodType = value > 0 ? value : 1\r\n                                return oldState\r\n                              })}\r\n                            />\r\n                          </Cell>\r\n                        </List>\r\n                      </Group>\r\n                      {(state.selected.publishers.length + state.selected.tags.length > 0) &&\r\n                      <React.Fragment>\r\n                        <Button level=\"outline\">Посмотреть превью вашей новостной ленты</Button>\r\n                        <Group><List>{state.selected.publishers.concat(state.selected.tags).map((label) => {\r\n                          const item = this.state.publishers.concat(this.state.tags).find(a => a.label == label)\r\n                          const isTag = this.state.tags.find(a => a.label == label) !== undefined\r\n                          sumPrice += priceTimeFactor(item.price, state.periodType)\r\n                          return  <Cell>\r\n                                    {(isTag ? '#' : '') + item.label} - {priceTimeFactor(item.price, state.periodType)}р.\r\n                                    <Button level=\"outline\" className=\"remove-from-subscribtions-btn\"\r\n                                      onClick={() => window.setGlobalState(oldState => {\r\n                                        oldState.subscribingProcess.selected[isTag ? 'tags' : 'publishers'].splice(oldState.subscribingProcess.selected[isTag ? 'tags' : 'publishers'].indexOf(item.label), 1)\r\n                                        return oldState\r\n                                      })}>x</Button>\r\n                                  </Cell>})}\r\n                        <Cell><Button className=\"pay-subscribtion\">Получить подписку за \r\n                          {((discount == 0) ? (' ' + sumPrice + 'р.') : <React.Fragment> <span className=\"line-throw\">{sumPrice}р.</span> {Math.round(sumPrice * (1 - discount) * 100) / 100}р.</React.Fragment>)}\r\n                        </Button></Cell>\r\n                        </List></Group>\r\n                      </React.Fragment>}\r\n                      <FormLayoutGroup>\r\n                        <Tabs>\r\n                          <TabsItem\r\n                            onClick={() => this.setState({ tab: 'publishers' })}\r\n                            selected={this.state.tab === 'publishers'}\r\n                          >\r\n                            Авторские рассылки {this.state.filter === '' ? '' : ('(' + this.state.publishers.filter(publisher => publisher.label.toLowerCase().includes(this.state.filter.toLowerCase())).length + ')')}\r\n                          </TabsItem>\r\n                          <TabsItem\r\n                            onClick={() => this.setState({ tab: 'tags' })}\r\n                            selected={this.state.tab === 'tags'}\r\n                          >\r\n                            Smart-Теги {this.state.filter === '' ? '' : ('(' + this.state.tags.filter(tag => tag.label.toLowerCase().includes(this.state.filter.toLowerCase())).length + ')')}\r\n                          </TabsItem>\r\n                        </Tabs>\r\n                        {this.state[this.state.tab].filter(item => item.label.toLowerCase().includes(this.state.filter.toLowerCase())).map(item =>\r\n                        <Button level=\"outline\" className=\"subscribe-source-btn\"\r\n                          onClick={() => !state.selected[this.state.tab].includes(item.label) ?\r\n                            window.setGlobalState(oldState => {\r\n                              oldState.subscribingProcess.selected[this.state.tab].push(item.label)\r\n                              oldState.subscribingProcess.manuallyChanged = true\r\n                              return oldState\r\n                            }) :\r\n                            window.setGlobalState(oldState => {\r\n                              return oldState\r\n                              // ----\r\n                              oldState.subscribingProcess.selected[oldState.tab].splice(oldState.selected[this.state.tab].indexOf(item.label), 1)\r\n                              return oldState\r\n                            })\r\n                          }>\r\n                          <img className=\"subscribe-pic\" src={item.pic} />\r\n                          {item.label} - \r\n                          {!state.selected[this.state.tab].includes(item.label) ? (' ' + priceTimeFactor(item.price, state.periodType) + 'р.') : 'добавлено'}\r\n                          <Link onClick={(e) => {\r\n                            e.stopPropagation()\r\n                            window.setGlobalState({\r\n                              preview: Object.assign(item, {type: this.state.tab})\r\n                            })\r\n                            this.props.open('channel-preview')\r\n                          }}><Icon28Info /></Link>\r\n                        </Button>)}\r\n                      </FormLayoutGroup>\r\n                    </FormLayout>\r\n                  </Panel>)\r\n          \r\n        }}\r\n        </AppState.Consumer>\r\n    )\r\n  }\r\n}\r\n\r\nexport default SubscribePage\r\n\r\nconst priceTimeFactor = (price, periodType) => price * periodType","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Panel, PanelHeader, HeaderButton, platform, IOS, Group, Div, Header, Gallery, Button} from '@vkontakte/vkui';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nconst osname = platform();\r\n\r\nclass GetOneArticle extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {}\r\n  }\r\n  render() {\r\n    return  (<Panel id={this.props.id}>\r\n              <PanelHeader\r\n                left={<HeaderButton onClick={this.props.goBack}>\r\n                  {osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n                </HeaderButton>}\r\n              >\r\n                Получить \"{this.props.article.title}\"\r\n              </PanelHeader>\r\n              <Group>\r\n                <Div className=\"text-center\">\r\n                  Вы можете приобрести исключительный доступ к статье \"{this.props.article.title}\" за\r\n                </Div>\r\n                <Div>\r\n                  <Button className=\"pay-subscribtion\">{this.props.article.price}р.</Button>\r\n                </Div>\r\n              </Group>\r\n              <Group>\r\n                <Div>\r\n                  Так же вы можете получить доступ, репостнув эту статью себе на стену<br />\r\n                  (Только для публичных аккаунтов)\r\n                  <Button level=\"outline\" className=\"pay-subscribtion\">Сделать репост</Button>\r\n                </Div>\r\n              </Group>\r\n            </Panel>)\r\n  }\r\n}\r\n\r\nexport default GetOneArticle;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Panel, PanelHeader, HeaderButton, platform, IOS, Group, Div, Header, Gallery, Button} from '@vkontakte/vkui';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nimport AppState from '../components/AppState'\r\nconst osname = platform();\r\n\r\nclass NewsChannelDescription extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n  }\r\n  render() {\r\n    return  (<Panel id={this.props.id}>\r\n              <PanelHeader\r\n                left={<HeaderButton onClick={this.props.goBack}>\r\n                  {osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n                </HeaderButton>}\r\n              >\r\n                {this.props.type} {this.props.label}\r\n              </PanelHeader>\r\n              <AppState.Consumer>{(globalState) => {\r\n                const isSelected = globalState.subscribingProcess.selected.tags.concat(globalState.subscribingProcess.selected.publishers).includes(globalState.preview.label)\r\n                return  <React.Fragment>\r\n                          <Div><img className=\"subscribe-channel-pic\" src={globalState.preview.pic} /></Div>\r\n                          <Div>{globalState.preview.type === 'tag' ? 'Смарт-тег' : 'Авторские рассылки издателя'} {globalState.preview.label}</Div>\r\n                          <Div>{globalState.preview.description}</Div>\r\n                          <Div>{globalState.preview.price}р. за неделю подписки</Div>\r\n                          <Div className=\"double-buttons\">\r\n                            <Button level=\"outline\">Превью постов</Button>\r\n                            <Button onClick={() => {\r\n                              this.props.goBack()\r\n                              window.setGlobalState(oldState => {\r\n                                if (!isSelected)\r\n                                  oldState.subscribingProcess.selected[globalState.preview.type].push(globalState.preview.label)\r\n                                else\r\n                                  oldState.subscribingProcess.selected[globalState.preview.type].splice(\r\n                                    oldState.subscribingProcess.selected[globalState.preview.type].indexOf(globalState.preview.label), 1)\r\n                                return oldState\r\n                              })\r\n                            }}>{isSelected ? 'Удалить из подписки' : 'Добавить в подписку'}</Button>\r\n                          </Div>\r\n                        </React.Fragment>\r\n              }}</AppState.Consumer>\r\n            </Panel>)\r\n  }\r\n}\r\n\r\nexport default NewsChannelDescription;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Panel, PanelHeader, HeaderButton, platform, IOS, Group, Div, Header, Gallery, Button, List, Cell} from '@vkontakte/vkui';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nimport AppState from '../components/AppState'\r\nimport {Doughnut} from 'react-chartjs-2'\r\nconst osname = platform();\r\n\r\nclass PublisherAccount extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      name: 'Бумага',\r\n      subscribers: 12,\r\n      profit: 1000,\r\n      tags: [{\r\n        label: 'Политика',\r\n        value: 60\r\n      }, {\r\n        label: 'Урбанистика',\r\n        value: 20\r\n      }, {\r\n        label: 'Мемы',\r\n        value: 10\r\n      }, {\r\n        label: 'Очень важный тег',\r\n        value: 10\r\n      }]\r\n    }\r\n  }\r\n  render() {\r\n    const tags = (() => {\r\n      const coppyOfStateTags = [...this.state.tags]\r\n      const sortedTags = coppyOfStateTags.sort((a, b) => a.value > b.value ? -1 : 1)\r\n      return sortedTags.slice(0, 15)\r\n    })()\r\n    return  (<Panel id={this.props.id}>\r\n              <PanelHeader\r\n                left={<HeaderButton onClick={this.props.goBack}>\r\n                  {osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n                </HeaderButton>}\r\n              >\r\n                {this.props.type} {this.props.label}\r\n              </PanelHeader>\r\n              <Group>\r\n                <List>\r\n                  <Cell className=\"text-center\">\r\n                    <Header className=\"display-block-header\">{this.state.name}</Header>\r\n                    <small>Авторский канал</small>\r\n                  </Cell>\r\n                </List>\r\n              </Group>\r\n              <Doughnut\r\n                width={200}\r\n                data={{\r\n                  labels: tags.map(tag => tag.label),\r\n                  datasets: [{\r\n                    data: tags.map(tag => tag.value),\r\n                    backgroundColor: [\"PeachPuff\", \"DarkSalmon\", \"PapayaWhip\", \"LightYellow\", \"Khaki\", \"MediumPurple\", \"DarkViolet\", \"LightSalmon\", \"IndianRed\", \"LemonChiffon\", \"Salmon\", \"DarkOrchid\", \"Moccasin\", \"LightGoldenrodYellow\", \"BlueViolet\", \"PaleGoldenrod\", \"LightCoral\", \"DarkKhaki\"]\r\n                  }]\r\n                }} />\r\n              <Div className=\"text-center\">Самые прибыльные теги</Div>\r\n              <Group>\r\n                <List>\r\n                  <Cell className=\"text-center\">\r\n                    Баланс: <span className=\"publisher-profit\">{this.state.profit}р.</span>\r\n                    <br />\r\n                    <br />\r\n                    <small>Запросить вывод</small>\r\n                  </Cell>\r\n                </List>\r\n              </Group>\r\n              <Div className=\"double-buttons\">\r\n                <Button level=\"outline\">История всех постов</Button>\r\n                <Button onClick={() => this.props.open('article-editor')}>Создать новый пост</Button>\r\n              </Div>\r\n              {/*<PieChart\r\n                size={300}\r\n                innerHoleSize={200}\r\n                data={this.state.tags.map(tag => ({\r\n                  key: tag.label,\r\n                  value: tag.value\r\n                }))}\r\n              />*/}\r\n            </Panel>)\r\n  }\r\n}\r\n\r\nexport default PublisherAccount","import { changeDataInUrl, getUrlData } from './utils'\r\n\r\nlet subscribers = [], path = ['home'], initOpenAllowed = [], onInitRedirect = {}\r\nconst callSubscribers = () => {\r\n  for (let subscriber of subscribers)\r\n    subscriber(path)\r\n}\r\nconst navigator = {\r\n  subscribe: (func) => { subscribers.push(func) },\r\n  go: (page) => {\r\n    path.push(page)\r\n    callSubscribers()\r\n    changeDataInUrl({page: path.slice(-1)[0]})\r\n  },\r\n  back: () => {\r\n    if (path.length > 1)\r\n      path.splice(path.length - 1, 1)\r\n    callSubscribers()\r\n    changeDataInUrl({page: path.slice(-1)[0]})\r\n  },\r\n  init: (options) => {\r\n    initOpenAllowed = options.initOpenAllowed\r\n    onInitRedirect = options.onInitRedirect\r\n    const urlData = getUrlData()\r\n    if (urlData.page !== undefined) {\r\n      if (initOpenAllowed.includes(urlData.page)) {\r\n        path.push(urlData.page)\r\n        callSubscribers()\r\n      } else if (onInitRedirect[urlData.page] !== undefined) {\r\n        path.push(onInitRedirect[urlData.page])\r\n        callSubscribers()\r\n      }\r\n    }\r\n  }\r\n  // setRoot(root) => {\r\n  //   path = [root]\r\n  //   setTimeout(() => {\r\n  //     for (let subscriber of subscribers)\r\n  //       subscriber(path)\r\n  //   }, 0)\r\n  // }\r\n}\r\n\r\n\r\nexport default navigator","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Panel, PanelHeader, HeaderButton, Button, platform, IOS, Group, Div, Input, Header, Gallery, Spinner, PopoutWrapper} from '@vkontakte/vkui';\r\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\r\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\r\nimport axios from 'axios'\r\n\r\nimport PayWall from '../components/PayWall.js'\r\nimport AppState from '../components/AppState'\r\nimport { Editor } from 'react-draft-wysiwyg';\r\nimport { convertToRaw } from 'draft-js'\r\nimport draftToMarkdown from 'draftjs-to-markdown';\r\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\r\nconst osname = platform();\r\n\r\nclass ArticleEditor extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.quillRef = React.createRef()\r\n    this.state = {\r\n      article: [],\r\n      editor: '',\r\n      tags: [],\r\n      newTag : '',\r\n      newTagModalVisible: false\r\n    }\r\n  }\r\n  save() {\r\n    const rawContentState = convertToRaw(this.state.editor.getCurrentContent());\r\n    const markup = draftToMarkdown(rawContentState);\r\n    console.log(markup)\r\n  }\r\n  render() {\r\n    return  (<Panel id={this.props.id}>\r\n              <PanelHeader\r\n                left={<HeaderButton onClick={this.props.goBack}>\r\n                  {osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\r\n                </HeaderButton>}\r\n              >Создать стаью</PanelHeader>\r\n              <Group className='quill-wrapper'>\r\n                <Editor\r\n                  editorState={this.state.editor}\r\n                  toolbarClassName=\"toolbarClassName\"\r\n                  wrapperClassName=\"wrapperClassName\"\r\n                  editorClassName=\"editorClassName\"\r\n                  onEditorStateChange={(editor) => this.setState({editor})}\r\n                  toolbar={editorToolBar}\r\n                />\r\n              </Group>\r\n              <Group>\r\n                <Div><small>Теги к статье</small></Div>\r\n                <Div>{this.state.tags.map((tag) => <Button className=\"article-editor-tag\" level=\"outline\" onClick={() => this.setState(oldState => {\r\n                      oldState.tags.splice(oldState.tags.indexOf(tag), 1)\r\n                      return oldState\r\n                    })}>\r\n                    {/*<span >x</span>*/}\r\n                    {tag}\r\n                  </Button>)}\r\n                  <Button level=\"outline\" onClick={() => this.setState({newTagModalVisible: true})}>+</Button>\r\n                </Div></Group>\r\n              <Div className=\"double-buttons\">\r\n                <Button level=\"outline\">Сохранить черновик</Button>\r\n                <Button onClick={() => this.save()}>Опубликовать</Button>\r\n              </Div>\r\n              {this.state.newTagModalVisible && <PopoutWrapper v=\"center\" h=\"center\" onClick={() => this.setState({newTagModalVisible: false})}>\r\n                <Group className=\"article-editor-tag-input\" onClick={e => e.stopPropagation()}>\r\n                  <p>Введите тег</p>\r\n                  <Input value={this.state.newTag} onChange={(e) => this.setState({newTag: e.target.value})}/>\r\n                  <br />\r\n                  <Button level=\"outline\"  onClick={() => this.setState({\r\n                    newTagModalVisible: false,\r\n                    tags: this.state.tags.concat([this.state.newTag]),\r\n                    newTag: ''\r\n                  })}>Добавить</Button>\r\n                </Group>\r\n              </PopoutWrapper>}\r\n            </Panel>)\r\n  }\r\n}\r\n\r\nexport default ArticleEditor\r\n\r\n\r\nconst editorToolBar = {\r\n  options: ['inline', 'blockType', 'list', 'link', 'emoji', 'image', 'history'],\r\n  inline: {\r\n    inDropdown: false,\r\n    className: undefined,\r\n    component: undefined,\r\n    dropdownClassName: undefined,\r\n    options: ['bold', 'italic', 'underline'],\r\n    bold: { icon: Editor.bold, className: undefined },\r\n    italic: { icon: Editor.italic, className: undefined },\r\n  },\r\n  blockType: {\r\n    inDropdown: true,\r\n    options: ['Normal', 'H1', 'H2', 'Blockquote', 'Code'],\r\n    className: undefined,\r\n    component: undefined,\r\n    dropdownClassName: undefined,\r\n  },\r\n  list: {\r\n    inDropdown: false,\r\n    className: undefined,\r\n    component: undefined,\r\n    dropdownClassName: undefined,\r\n    options: ['unordered', 'ordered', 'indent', 'outdent'],\r\n    unordered: { icon: Editor.unordered, className: undefined },\r\n    ordered: { icon: Editor.ordered, className: undefined },\r\n    indent: { icon: Editor.indent, className: undefined },\r\n    outdent: { icon: Editor.outdent, className: undefined },\r\n  },\r\n  textAlign: {\r\n    inDropdown: false,\r\n    className: undefined,\r\n    component: undefined,\r\n    dropdownClassName: undefined,\r\n    options: ['left', 'center', 'right', 'justify'],\r\n    left: { icon: Editor.left, className: undefined },\r\n    center: { icon: Editor.center, className: undefined },\r\n    right: { icon: Editor.right, className: undefined },\r\n    justify: { icon: Editor.justify, className: undefined },\r\n  },\r\n  colorPicker: {\r\n    icon: Editor.color,\r\n    className: undefined,\r\n    component: undefined,\r\n    popupClassName: undefined,\r\n    colors: ['rgb(97,189,109)', 'rgb(26,188,156)', 'rgb(84,172,210)', 'rgb(44,130,201)',\r\n      'rgb(147,101,184)', 'rgb(71,85,119)', 'rgb(204,204,204)', 'rgb(65,168,95)', 'rgb(0,168,133)',\r\n      'rgb(61,142,185)', 'rgb(41,105,176)', 'rgb(85,57,130)', 'rgb(40,50,78)', 'rgb(0,0,0)',\r\n      'rgb(247,218,100)', 'rgb(251,160,38)', 'rgb(235,107,86)', 'rgb(226,80,65)', 'rgb(163,143,132)',\r\n      'rgb(239,239,239)', 'rgb(255,255,255)', 'rgb(250,197,28)', 'rgb(243,121,52)', 'rgb(209,72,65)',\r\n      'rgb(184,49,47)', 'rgb(124,112,107)', 'rgb(209,213,216)'],\r\n  },\r\n  link: {\r\n    inDropdown: false,\r\n    className: undefined,\r\n    component: undefined,\r\n    popupClassName: undefined,\r\n    dropdownClassName: undefined,\r\n    showOpenOptionOnHover: true,\r\n    defaultTargetOption: '_self',\r\n    options: ['link', 'unlink'],\r\n    link: { icon: Editor.link, className: undefined },\r\n    unlink: { icon: Editor.unlink, className: undefined },\r\n  },\r\n  emoji: {\r\n    icon: Editor.emoji,\r\n    className: undefined,\r\n    component: undefined,\r\n    popupClassName: undefined,\r\n    emojis: [\r\n      '😀', '😁', '😂', '😃', '😉', '😋', '😎', '😍', '😗', '🤗', '🤔', '😣', '😫', '😴', '😌', '🤓',\r\n      '😛', '😜', '😠', '😇', '😷', '😈', '👻', '😺', '😸', '😹', '😻', '😼', '😽', '🙀', '🙈',\r\n      '🙉', '🙊', '👼', '👮', '🕵', '💂', '👳', '🎅', '👸', '👰', '👲', '🙍', '🙇', '🚶', '🏃', '💃',\r\n      '⛷', '🏂', '🏌', '🏄', '🚣', '🏊', '⛹', '🏋', '🚴', '👫', '💪', '👈', '👉', '👉', '👆', '🖕',\r\n      '👇', '🖖', '🤘', '🖐', '👌', '👍', '👎', '✊', '👊', '👏', '🙌', '🙏', '🐵', '🐶', '🐇', '🐥',\r\n      '🐸', '🐌', '🐛', '🐜', '🐝', '🍉', '🍄', '🍔', '🍤', '🍨', '🍪', '🎂', '🍰', '🍾', '🍷', '🍸',\r\n      '🍺', '🌍', '🚑', '⏰', '🌙', '🌝', '🌞', '⭐', '🌟', '🌠', '🌨', '🌩', '⛄', '🔥', '🎄', '🎈',\r\n      '🎉', '🎊', '🎁', '🎗', '🏀', '🏈', '🎲', '🔇', '🔈', '📣', '🔔', '🎵', '🎷', '💰', '🖊', '📅',\r\n      '✅', '❎', '💯',\r\n    ],\r\n  },\r\n  /*embedded: {\r\n    icon: Editor.embedded,\r\n    className: undefined,\r\n    component: undefined,\r\n    popupClassName: undefined,\r\n    defaultSize: {\r\n      height: 'auto',\r\n      width: 'auto',\r\n    },\r\n  },*/\r\n  image: {\r\n    icon: Editor.image,\r\n    className: undefined,\r\n    component: undefined,\r\n    popupClassName: undefined,\r\n    urlEnabled: true,\r\n    uploadEnabled: true,\r\n    alignmentEnabled: true,\r\n    uploadCallback: undefined,\r\n    previewImage: false,\r\n    inputAccept: 'image/gif,image/jpeg,image/jpg,image/png,image/svg',\r\n    alt: { present: false, mandatory: false },\r\n    defaultSize: {\r\n      height: 'auto',\r\n      width: 'auto',\r\n    },\r\n  },\r\n  history: {\r\n    inDropdown: false,\r\n    className: undefined,\r\n    component: undefined,\r\n    dropdownClassName: undefined,\r\n    options: ['undo', 'redo'],\r\n    undo: { icon: Editor.undo, className: undefined },\r\n    redo: { icon: Editor.redo, className: undefined },\r\n  },\r\n}","import React from 'react';\r\nimport connect from '@vkontakte/vkui-connect';\r\nimport { View } from '@vkontakte/vkui';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\n\r\nimport './styles/main.css';\r\n\r\nimport Home from './panels/Home';\r\nimport Feed from './panels/Feed';\r\nimport Article from './panels/Article';\r\nimport SubscribePage from './panels/SubscribePage';\r\nimport GetOneArticle from './panels/GetOneArticle';\r\nimport ChannelPreview from './panels/ChannelPreview';\r\nimport PublisherAccount from './panels/PublisherAccount';\r\nimport navigator from './utils/navigator'\r\nimport AppState from './components/AppState'\r\nimport ArticleEditor from './panels/ArticleEditor';\r\nimport { getUrlData } from './utils/utils';\r\n\r\nclass App extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tactivePanel: 'home',\r\n\t\t\tfetchedUser: null,\r\n\t\t\tcurrentArticle: null,\r\n\t\t};\r\n  }\r\n\r\n\tcomponentDidMount() {\r\n\t\tnavigator.subscribe((path) => this.setState({ activePanel: path.slice(-1)[0] }))\r\n    navigator.init({\r\n    \tinitOpenAllowed: ['home', 'feed', 'article', 'subscribe', 'publisher-account', 'article-editor'],\r\n    \tonInitRedirect: {\r\n    \t\t'get-one-article': 'article',\r\n    \t\t'channel-preview': 'subscribe',\r\n    \t\t'preview-feed': 'home'\r\n    \t}\r\n    })\r\n    let UrlData = getUrlData();\r\n    if (typeof UrlData.article != \"undefined\") {\r\n    \tconsole.log(UrlData.article)\r\n      this.setState({currentArticle: UrlData.article});\r\n    }\r\n\t\tconnect.subscribe((e) => {\r\n\t\t\talert(JSON.stringify(e))\r\n\t\t\tswitch (e.detail.type) {\r\n\t\t\t\tcase 'VKWebAppGetUserInfoResult':\r\n\t\t\t\t\tthis.setState({ fetchedUser: e.detail.data });\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t// console.log(e.detail.type);\r\n\t\t\t}\r\n\t\t});\r\n\t\tconnect.send('VKWebAppGetUserInfo', {});\r\n\t}\r\n\r\n\topen = (panel) => {\r\n\t\tnavigator.go(panel)\r\n\t\t// this.setState({ activePanel: panel })\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<AppState.Provider>\r\n\t\t\t\t<View activePanel={this.state.activePanel}>\r\n\t\t\t\t\t<Home id=\"home\" fetchedUser={this.state.fetchedUser} open={navigator.go} goBack={navigator.back}/>\r\n\t\t\t\t\t<Feed id=\"feed\" fetchedUser={this.state.fetchedUser} open={this.open}  goBack={navigator.back} setArticle={id => this.setState({currentArticle: id})} />\r\n\t\t\t\t\t<Article id=\"article\" open={navigator.go}\r\n\t\t\t\t\t\tarticle={this.state.currentArticle} user={this.state.fetchedUser}\r\n\t\t\t\t\t\tgoBack={navigator.back}/>\r\n\t\t\t\t\t<SubscribePage id=\"subscribe\" open={navigator.go} articleData={this.state.currentArticleData} goBack={navigator.back} />\r\n\t\t\t\t\t<GetOneArticle id=\"get-one-article\" open={navigator.go} article={this.state.currentArticleData} goBack={navigator.back}/>\r\n\t\t\t\t\t<ChannelPreview id=\"channel-preview\" open={navigator.go} goBack={navigator.back} />\r\n\t\t\t\t\t<PublisherAccount id=\"publisher-account\" open={navigator.go} goBack={navigator.back} />\r\n\t\t\t\t\t<ArticleEditor id=\"article-editor\" open={navigator.go} goBack={navigator.back} />\r\n\t\t\t\t</View>\r\n\t\t\t</AppState.Provider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nfunction registerValidSW(swUrl) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then((registration) => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing;\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the old content will have been purged and\n\t\t\t\t\t\t\t// the fresh content will have been added to the cache.\n\t\t\t\t\t\t\t// It's the perfect time to display a \"New content is\n\t\t\t\t\t\t\t// available; please refresh.\" message in your web app.\n\t\t\t\t\t\t\tconsole.log('New content is available; please refresh.');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error('Error during service worker registration:', error);\n\t\t});\n}\n\nfunction checkValidServiceWorker(swUrl) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl)\n\t\t.then((response) => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n\t\t\t\tresponse.headers.get('content-type').indexOf('javascript') === -1\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl);\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log('No internet connection found. App is running in offline mode.');\n\t\t});\n}\n\nconst isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n\t// [::1] is the IPv6 localhost address.\n\twindow.location.hostname === '[::1]' ||\n\t// 127.0.0.1/8 is considered localhost for IPv4.\n\twindow.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));\n\nexport default function register() {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Lets check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t'worker. To learn more, visit https://goo.gl/SC7cgQ'\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not local host. Just register service worker\n\t\t\t\tregisterValidSW(swUrl);\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready.then((registration) => {\n\t\t\tregistration.unregister();\n\t\t});\n\t}\n}\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vkui-connect';\nimport App from './App';\nimport registerServiceWorker from './sw';\n\n// Init VK App\nconnect.send('VKWebAppInit', {});\n\n// Service Worker For Cache\nregisterServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}