(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{186:function(e,t,a){e.exports=a.p+"static/media/lock.c6371603.svg"},192:function(e,t,a){e.exports=a(477)},227:function(e,t,a){},477:function(e,t,a){"use strict";a.r(t);a(193),a(217);var n=a(0),r=a.n(n),l=a(34),i=a.n(l),c=a(39),s=a.n(c),o=a(7),u=a(8),p=a(10),d=a(9),m=a(11),b=a(1),g=(a(225),a(227),a(16)),h=a.n(g),f=a(17),v=a.n(f),E=(Object(b.platform)(),function(e){function t(e){return Object(o.a)(this,t),Object(p.a)(this,Object(d.a)(t).call(this,e))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(b.Panel,{id:this.props.id},r.a.createElement(b.PanelHeader,null,"Home page"),r.a.createElement(b.Div,null,r.a.createElement(b.Button,{className:"pay-subscribtion",level:"outline",onClick:function(){return e.props.open("article")}},"\u0418\u0434\u0442\u0438 \u043a \u043f\u0435\u0440\u0441\u0438\u043a\u0443")))}}]),t}(r.a.Component)),w=a(40),k=a(63),y=a.n(k),C=function(){var e={};if(window.location.hash.length>0){var t=window.location.hash.substr(1),a=!0,n=!1,r=void 0;try{for(var l,i=t.split("&")[Symbol.iterator]();!(a=(l=i.next()).done);a=!0){var c=l.value;c.includes("=")&&(e[c.split("=")[0]]=c.split("=")[1])}}catch(s){n=!0,r=s}finally{try{a||null==i.return||i.return()}finally{if(n)throw r}}}return e},O=function(e){var t=["2770f1","3fb0ac","ba9077","729f98","6534ff","62bcfa","e05038","dc3966","026f52","f36523","e70247","07a5a4","4bae54","c75696","db3849"],a=0;return e.split("").forEach(function(n,r){a=17*a+e.charCodeAt(r),r%4==3&&(a%=t.length)}),"#"+t[a%t.length]},j=function(e){!function(e){var t="";for(var a in e)t+=a+"="+e[a]+"&";var n=t.substring(0,t.length-1);s.a.send("VKWebAppSetLocation",{location:n}),window.location.hash="#"+n}(Object.assign(C(),e))},N=(Object(b.platform)(),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={articles:null,value:"",selectedTags:[],popularTags:[]},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;y.a.get("/articles.json").then(function(e){t.setState({articles:e.data});var a=[];e.data.forEach(function(e){e.tags.forEach(function(e){var t=a.findIndex(function(t){return t.tag==e});-1===t?a.push({tag:e,popularity:1}):a=Object(w.a)(a.slice(0,t)).concat([{tag:e,popularity:a[t].popularity+1}],Object(w.a)(a.slice(t+1)))})}),a=a.sort(function(e,t){return t.popularity-e.popularity}).filter(function(e){return e.popularity>1}).map(function(e){return e.tag}),t.setState({popularTags:a})}).catch(function(e){t.setState({articles:[]})})}},{key:"toggleTag",value:function(e){var t=this.state.selectedTags,a=this.state.selectedTags.indexOf(e);-1==a?t.push(e):t=Object(w.a)(t.slice(0,a)).concat(Object(w.a)(t.slice(a+1))),this.setState({selectedTags:t})}},{key:"renderTags",value:function(e){var t=this;return r.a.createElement(b.HorizontalScroll,null,e.map(function(e){var a={};return a=t.state.selectedTags.includes(e)?{margin:"0 5px",background:O(e),color:"white"}:{margin:"0 5px",background:"rgba(1, 1, 1, 0)",color:O(e),boxShadow:"inset 0px 0px 0px 2px "+O(e)},r.a.createElement(b.Button,{onClick:function(){return t.toggleTag(e)},style:a},"#",e)}))}},{key:"renderArticleListing",value:function(e){var t=this,a=e.article.find(function(e){return"text"==e.type})||{text:""},n=e.article.find(function(e){return"gallery"==e.type});return r.a.createElement(b.Group,null,r.a.createElement(b.Div,{onClick:function(){t.props.setArticle(e.id),t.props.open("article")}},r.a.createElement("h3",{style:{margin:"0px 0"}},e.title),n.pics.length>0?r.a.createElement("img",{src:n.pics[0],style:{width:"100%"}}):"",r.a.createElement("p",null,a.text)),r.a.createElement(b.Cell,null,r.a.createElement("small",null,"\u0422\u0435\u0433\u0438:"),this.renderTags(e.tags)))}},{key:"renderArticles",value:function(){var e=this;return null==this.state.articles?r.a.createElement(b.Div,null,r.a.createElement(b.Spinner,null)):0==this.state.articles.length?r.a.createElement(b.Footer,null,"\u043d\u0435\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439"):this.state.articles.filter(function(t){return(0==e.state.selectedTags.length||e.state.selectedTags.map(function(e){return t.tags.includes(e)}).reduce(function(e,t){return e||t}))&&(t.title.includes(e.state.value)||t.article.map(function(t){return"text"==t.type&&t.text.includes(e.state.value)}).reduce(function(e,t){return e||t})||t.tags.map(function(t){return t.includes(e.state.value)}).reduce(function(e,t){return e||t}))}).map(function(t){return e.renderArticleListing(t)})}},{key:"render",value:function(){var e=this;return r.a.createElement(b.Panel,{id:"feed"},r.a.createElement(b.PanelHeader,null,"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"),r.a.createElement(b.Search,{theme:"default",onChange:function(t){return e.setState({value:t})}}),r.a.createElement(b.Div,null,r.a.createElement("small",null,"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u0442\u0435\u0433\u0438:")),r.a.createElement(b.Cell,null,this.renderTags(this.state.popularTags)),this.renderArticles())}}]),t}(r.a.Component)),S=(a(247),a(186)),P=a.n(S),B=(Object(b.platform)(),function(e){function t(e){return Object(o.a)(this,t),Object(p.a)(this,Object(d.a)(t).call(this,e))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(b.Div,null,r.a.createElement("img",{className:"lock-icon",src:P.a}),r.a.createElement(b.Div,{className:"payWall-title"},"\u0412\u044b \u0432\u0438\u0434\u0435\u0442\u0435 \u0442\u043e\u043b\u044c\u043a\u043e ",this.props.part?this.props.part+"%":"\u0447\u0430\u0441\u0442\u044c"," \u0441\u0442\u0430\u0442\u044c\u0438,",r.a.createElement("br",null),"\u0447\u0442\u043e\u0431\u044b  \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0435\u0451 \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435:"),r.a.createElement(b.Div,{className:"double-buttons"},r.a.createElement(b.Button,{level:"outline",onClick:function(){return e.props.goToGetArticlePage()}},"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u044d\u0442\u043e\u0439 \u0441\u0442\u0430\u0442\u044c\u0435"),r.a.createElement(b.Button,{onClick:function(){return e.props.goToSubscribePage()}},"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0433\u0438\u0431\u043a\u0443\u044e \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0443")))}}]),t}(r.a.Component)),T={article:{},subscribingProcess:{selected:{tags:[],publishers:[]},periodType:1}},x=r.a.createContext(T),D=function(e){function t(e){var a;return Object(o.a)(this,t),a=Object(p.a)(this,Object(d.a)(t).call(this,e)),window.setGlobalState=function(e){"function"===typeof e?a.setState(e(Object.assign({},a.state))):a.setState(e)},window.getGlobalState=function(){return Object.assign({},a.state)},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setState(T)}},{key:"render",value:function(){return r.a.createElement(x.Provider,{value:this.state},this.props.children)}}]),t}(r.a.Component),G={Consumer:x.Consumer,Provider:D},L=Object(b.platform)(),A=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={article:null},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;null===e.article||null!==this.state.article&&this.state.article.title===e.article.title||y.a.get("https://agentstvo-adv.ru:3000/api/getNews").then(function(e){var a=e.data.result;t.setState({article:a});var n={article:{tags:a.tags,publisher:a.publisher,title:a.title,price:a.price}};window.getGlobalState().subscribingProcess.manuallyChanged||(n.subscribingProcess={selected:{tags:a.tags,publishers:[a.publisher]}}),n.subscribingProcess.periodType=window.getGlobalState().subscribingProcess.periodType,window.setGlobalState(n)}).catch(function(e){t.setState({article:{title:"\u0423\u043f\u0441...",article:[{type:"text",text:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"},{type:"text",text:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0441\u0442\u0438 \u0432 \u043a\u043e\u043d\u0441\u043e\u043b\u0438"}]}})})}},{key:"genArticle",value:function(e){var t=this;return r.a.createElement(r.a.Fragment,null,this.state.article.article.map(function(e,a){var n=a===t.state.article.article.length-1&&t.state.article.payWall&&"last-text-block";switch(e.type){case"text":return r.a.createElement(b.Div,{className:n},e.text);case"header":return r.a.createElement(b.Header,{className:n,level:e.size?e.size+"":"1"},e.text);case"gallery":return r.a.createElement(b.Gallery,{className:n,slideWidth:"100%",style:{display:"table"},bullets:"dark"},e.pics.map(function(e){return r.a.createElement("img",{src:e,style:{width:"100%",height:"auto"}})}));default:return r.a.createElement(b.Div,{className:n},"Error, unkonw node type: ",e.type)}}),this.state.article.payWall&&r.a.createElement(B,{part:this.state.article.payWall,goToGetArticlePage:function(){return t.props.open("get-one-article")},goToSubscribePage:function(){return t.props.open("subscribe")}}))}},{key:"render",value:function(){return r.a.createElement(b.Panel,{id:this.props.id},r.a.createElement(b.PanelHeader,{left:r.a.createElement(b.HeaderButton,{onClick:this.props.goBack},L===b.IOS?r.a.createElement(h.a,null):r.a.createElement(v.a,null))},null!=this.state.article?this.state.article.title:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u0442\u0430\u0442\u044c\u0438..."),null!=this.state.article?r.a.createElement(b.Group,null,this.genArticle(this.state.article)):r.a.createElement(b.Div,null,r.a.createElement(b.Spinner,null)))}}]),t}(r.a.Component),H=a(187),I=a.n(H),W=a(188),_=a.n(W),V=["\u041d\u0435\u0434\u0435\u043b\u044f","\u0414\u0432\u0435 \u043d\u0435\u0434\u0435\u043b\u0438","\u041c\u0435\u0441\u044f\u0446","6 \u041c\u0435\u0441\u044f\u0446\u0435\u0432","\u0413\u043e\u0434","5 \u043b\u0435\u0442"],M=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={code:"",tab:"publishers",searchOpened:!1,filter:"",tags:[{label:"\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430",pic:"https://www.telegraf-spb.ru/published/publicdata/B622311/attachments/SC/products_pictures/united-states-flag_enl.jpg",description:"Lorem ipsum dolor sit amet",subscribers:10,publishers:["\u0411\u0443\u043c\u0430\u0433\u0430","\u041b\u0435\u043d\u0442\u0430\u0447"],price:123},{label:"\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430",pic:"https://www.telegraf-spb.ru/published/publicdata/B622311/attachments/SC/products_pictures/united-states-flag_enl.jpg",description:"Lorem ipsum dolor sit amet",subscribers:12,publishers:["\u0411\u0443\u043c\u0430\u0433\u0430","\u041b\u0435\u043d\u0442\u0430\u0447"],price:123},{label:"\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430",pic:"https://www.telegraf-spb.ru/published/publicdata/B622311/attachments/SC/products_pictures/united-states-flag_enl.jpg",description:"Lorem ipsum dolor sit amet",subscribers:8,publishers:["\u0411\u0443\u043c\u0430\u0433\u0430","\u041b\u0435\u043d\u0442\u0430\u0447"],price:123},{label:"\u043f\u043e\u043b\u0438\u0442\u0438\u043a\u0430",pic:"https://www.telegraf-spb.ru/published/publicdata/B622311/attachments/SC/products_pictures/united-states-flag_enl.jpg",description:"Lorem ipsum dolor sit amet",subscribers:7,publishers:["\u0411\u0443\u043c\u0430\u0433\u0430","\u041b\u0435\u043d\u0442\u0430\u0447"],price:123}],publishers:[{label:"\u0411\u0443\u043c\u0430\u0433\u0430",pic:"https://www.telegraf-spb.ru/published/publicdata/B622311/attachments/SC/products_pictures/united-states-flag_enl.jpg",description:"\u0411\u0443\u043c\u0430\u0433\u0430, \u0440\u0432\u0451\u0442\u0441\u044f, \u0433\u043e\u0440\u0438\u0442, \u0434\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u0438\u0437 \u0442\u0440\u0451\u0445 \u0442\u0440\u043e\u0441\u0442\u043d\u0438\u043a\u043e\u0432",subscribers:11,price:123},{label:"\u041b\u0435\u043d\u0442\u0430\u0447",pic:"https://www.telegraf-spb.ru/published/publicdata/B622311/attachments/SC/products_pictures/united-states-flag_enl.jpg",description:"\u0411\u0443\u043c\u0430\u0433\u0430, \u0440\u0432\u0451\u0442\u0441\u044f, \u0433\u043e\u0440\u0438\u0442, \u0434\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u0438\u0437 \u0442\u0440\u0451\u0445 \u0442\u0440\u043e\u0441\u0442\u043d\u0438\u043a\u043e\u0432",subscribers:11,price:123}]},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(G.Consumer,null,function(t){var a=t.subscribingProcess;console.log(a);var n=0,l=0;return a.selected.publishers.length+a.selected.tags.length>1&&(l=(a.selected.publishers.length+a.selected.tags.length)/15)>.5&&(l=.5),r.a.createElement(b.Panel,{id:e.props.id},r.a.createElement(b.PanelHeader,{left:r.a.createElement(b.HeaderButton,{onClick:e.props.goBack},b.osname===b.IOS?r.a.createElement(h.a,null):r.a.createElement(v.a,null)),noShadow:!0,right:r.a.createElement(b.HeaderButton,{onClick:e.props.goBack},r.a.createElement(I.a,null))},"\u0413\u0438\u0431\u043a\u0430\u044f \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0430"),r.a.createElement(b.Search,{theme:"default",onChange:function(t){return e.setState({filter:t})},value:e.state.filter}),r.a.createElement(b.FormLayout,null,r.a.createElement(b.Group,{top:"\u0418\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0438: "+V[a.periodType-1],bottom:""},r.a.createElement(b.List,null,r.a.createElement(b.Cell,null,r.a.createElement(b.Slider,{step:1,min:0,max:V.length,value:Number(a.periodType),onChange:function(e){return window.setGlobalState(function(t){return t.subscribingProcess.periodType=e>0?e:1,t})}})))),a.selected.publishers.length+a.selected.tags.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(b.Button,{level:"outline"},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043f\u0440\u0435\u0432\u044c\u044e \u0432\u0430\u0448\u0435\u0439 \u043d\u043e\u0432\u043e\u0441\u0442\u043d\u043e\u0439 \u043b\u0435\u043d\u0442\u044b"),r.a.createElement(b.Group,null,r.a.createElement(b.List,null,a.selected.publishers.concat(a.selected.tags).map(function(t){var l=e.state.publishers.concat(e.state.tags).find(function(e){return e.label==t}),i=void 0!==e.state.tags.find(function(e){return e.label==t});return n+=R(l.price,a.periodType),r.a.createElement(b.Cell,null,(i?"#":"")+l.label," - ",R(l.price,a.periodType),"\u0440.",r.a.createElement(b.Button,{level:"outline",className:"remove-from-subscribtions-btn",onClick:function(){return window.setGlobalState(function(e){return e.subscribingProcess.selected[i?"tags":"publishers"].splice(e.subscribingProcess.selected[i?"tags":"publishers"].indexOf(l.label),1),e})}},"x"))}),r.a.createElement(b.Cell,null,r.a.createElement(b.Button,{className:"pay-subscribtion"},"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0443 \u0437\u0430",0==l?" "+n+"\u0440.":r.a.createElement(r.a.Fragment,null," ",r.a.createElement("span",{className:"line-throw"},n,"\u0440.")," ",Math.round(n*(1-l)*100)/100,"\u0440.")))))),r.a.createElement(b.FormLayoutGroup,null,r.a.createElement(b.Tabs,null,r.a.createElement(b.TabsItem,{onClick:function(){return e.setState({tab:"publishers"})},selected:"publishers"===e.state.tab},"\u0410\u0432\u0442\u043e\u0440\u0441\u043a\u0438\u0435 \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0438 ",""===e.state.filter?"":"("+e.state.publishers.filter(function(t){return t.label.toLowerCase().includes(e.state.filter.toLowerCase())}).length+")"),r.a.createElement(b.TabsItem,{onClick:function(){return e.setState({tab:"tags"})},selected:"tags"===e.state.tab},"Smart-\u0422\u0435\u0433\u0438 ",""===e.state.filter?"":"("+e.state.tags.filter(function(t){return t.label.toLowerCase().includes(e.state.filter.toLowerCase())}).length+")")),e.state[e.state.tab].filter(function(t){return t.label.toLowerCase().includes(e.state.filter.toLowerCase())}).map(function(t){return r.a.createElement(b.Button,{level:"outline",className:"subscribe-source-btn",onClick:function(){return a.selected[e.state.tab].includes(t.label)?window.setGlobalState(function(e){return e}):window.setGlobalState(function(a){return a.subscribingProcess.selected[e.state.tab].push(t.label),a.subscribingProcess.manuallyChanged=!0,a})}},r.a.createElement("img",{className:"subscribe-pic",src:t.pic}),t.label," -",a.selected[e.state.tab].includes(t.label)?"\u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e":" "+R(t.price,a.periodType)+"\u0440.",r.a.createElement(b.Link,{onClick:function(a){a.stopPropagation(),window.setGlobalState({preview:Object.assign(t,{type:e.state.tab})}),e.props.open("channel-preview")}},r.a.createElement(_.a,null)))}))))})}}]),t}(r.a.Component),R=function(e,t){return e*t},U=Object(b.platform)(),F=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(b.Panel,{id:this.props.id},r.a.createElement(b.PanelHeader,{left:r.a.createElement(b.HeaderButton,{onClick:this.props.goBack},U===b.IOS?r.a.createElement(h.a,null):r.a.createElement(v.a,null))},'\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c "',this.props.article.title,'"'),r.a.createElement(b.Group,null,r.a.createElement(b.Div,{className:"text-center"},'\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u0438\u043e\u0431\u0440\u0435\u0441\u0442\u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0441\u0442\u0430\u0442\u044c\u0435 "',this.props.article.title,'" \u0437\u0430'),r.a.createElement(b.Div,null,r.a.createElement(b.Button,{className:"pay-subscribtion"},this.props.article.price,"\u0440."))),r.a.createElement(b.Group,null,r.a.createElement(b.Div,null,"\u0422\u0430\u043a \u0436\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f, \u0440\u0435\u043f\u043e\u0441\u0442\u043d\u0443\u0432 \u044d\u0442\u0443 \u0441\u0442\u0430\u0442\u044c\u044e \u0441\u0435\u0431\u0435 \u043d\u0430 \u0441\u0442\u0435\u043d\u0443",r.a.createElement("br",null),"(\u0422\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0445 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u043e\u0432)",r.a.createElement(b.Button,{level:"outline",className:"pay-subscribtion"},"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0440\u0435\u043f\u043e\u0441\u0442"))))}}]),t}(r.a.Component),K=Object(b.platform)(),z=function(e){function t(e){return Object(o.a)(this,t),Object(p.a)(this,Object(d.a)(t).call(this,e))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(b.Panel,{id:this.props.id},r.a.createElement(b.PanelHeader,{left:r.a.createElement(b.HeaderButton,{onClick:this.props.goBack},K===b.IOS?r.a.createElement(h.a,null):r.a.createElement(v.a,null))},this.props.type," ",this.props.label),r.a.createElement(G.Consumer,null,function(t){var a=t.subscribingProcess.selected.tags.concat(t.subscribingProcess.selected.publishers).includes(t.preview.label);return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.Div,null,r.a.createElement("img",{className:"subscribe-channel-pic",src:t.preview.pic})),r.a.createElement(b.Div,null,"tag"===t.preview.type?"\u0421\u043c\u0430\u0440\u0442-\u0442\u0435\u0433":"\u0410\u0432\u0442\u043e\u0440\u0441\u043a\u0438\u0435 \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0438 \u0438\u0437\u0434\u0430\u0442\u0435\u043b\u044f"," ",t.preview.label),r.a.createElement(b.Div,null,t.preview.description),r.a.createElement(b.Div,null,t.preview.price,"\u0440. \u0437\u0430 \u043d\u0435\u0434\u0435\u043b\u044e \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0438"),r.a.createElement(b.Div,{className:"double-buttons"},r.a.createElement(b.Button,{level:"outline"},"\u041f\u0440\u0435\u0432\u044c\u044e \u043f\u043e\u0441\u0442\u043e\u0432"),r.a.createElement(b.Button,{onClick:function(){e.props.goBack(),window.setGlobalState(function(e){return a?e.subscribingProcess.selected[t.preview.type].splice(e.subscribingProcess.selected[t.preview.type].indexOf(t.preview.label),1):e.subscribingProcess.selected[t.preview.type].push(t.preview.label),e})}},a?"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0438":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0443")))}))}}]),t}(r.a.Component),q=a(189),J=Object(b.platform)(),Y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={name:"\u0411\u0443\u043c\u0430\u0433\u0430",subscribers:12,profit:1e3,tags:[{label:"\u041f\u043e\u043b\u0438\u0442\u0438\u043a\u0430",value:60},{label:"\u0423\u0440\u0431\u0430\u043d\u0438\u0441\u0442\u0438\u043a\u0430",value:20},{label:"\u041c\u0435\u043c\u044b",value:10},{label:"\u041e\u0447\u0435\u043d\u044c \u0432\u0430\u0436\u043d\u044b\u0439 \u0442\u0435\u0433",value:10}]},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=Object(w.a)(e.state.tags).sort(function(e,t){return e.value>t.value?-1:1}).slice(0,15);return r.a.createElement(b.Panel,{id:this.props.id},r.a.createElement(b.PanelHeader,{left:r.a.createElement(b.HeaderButton,{onClick:this.props.goBack},J===b.IOS?r.a.createElement(h.a,null):r.a.createElement(v.a,null))},this.props.type," ",this.props.label),r.a.createElement(b.Group,null,r.a.createElement(b.List,null,r.a.createElement(b.Cell,{className:"text-center"},r.a.createElement(b.Header,{className:"display-block-header"},this.state.name),r.a.createElement("small",null,"\u0410\u0432\u0442\u043e\u0440\u0441\u043a\u0438\u0439 \u043a\u0430\u043d\u0430\u043b")))),r.a.createElement(q.a,{width:200,data:{labels:t.map(function(e){return e.label}),datasets:[{data:t.map(function(e){return e.value}),backgroundColor:["PeachPuff","DarkSalmon","PapayaWhip","LightYellow","Khaki","MediumPurple","DarkViolet","LightSalmon","IndianRed","LemonChiffon","Salmon","DarkOrchid","Moccasin","LightGoldenrodYellow","BlueViolet","PaleGoldenrod","LightCoral","DarkKhaki"]}]}}),r.a.createElement(b.Div,{className:"text-center"},"\u0421\u0430\u043c\u044b\u0435 \u043f\u0440\u0438\u0431\u044b\u043b\u044c\u043d\u044b\u0435 \u0442\u0435\u0433\u0438"),r.a.createElement(b.Group,null,r.a.createElement(b.List,null,r.a.createElement(b.Cell,{className:"text-center"},"\u0411\u0430\u043b\u0430\u043d\u0441: ",r.a.createElement("span",{className:"publisher-profit"},this.state.profit,"\u0440."),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("small",null,"\u0417\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0432\u044b\u0432\u043e\u0434")))),r.a.createElement(b.Div,{className:"double-buttons"},r.a.createElement(b.Button,{level:"outline"},"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0432\u0441\u0435\u0445 \u043f\u043e\u0441\u0442\u043e\u0432"),r.a.createElement(b.Button,{onClick:function(){return e.props.open("article-editor")}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u0441\u0442")))}}]),t}(r.a.Component),Q=[],$=["home"],X=[],Z={},ee=function(){for(var e=0;e<Q.length;e++){(0,Q[e])($)}},te={subscribe:function(e){Q.push(e)},go:function(e){$.push(e),ee(),j({page:$.slice(-1)[0]})},back:function(){$.length>1&&$.splice($.length-1,1),ee(),j({page:$.slice(-1)[0]})},init:function(e){X=e.initOpenAllowed,Z=e.onInitRedirect;var t=C();void 0!==t.page&&(X.includes(t.page)?($.push(t.page),ee()):void 0!==Z[t.page]&&($.push(Z[t.page]),ee()))}},ae=a(12),ne=a(111),re=a(191),le=a.n(re),ie=(a(475),Object(b.platform)()),ce=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).quillRef=r.a.createRef(),a.state={article:[],editor:"",tags:[],newTag:"",newTagModalVisible:!1},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"save",value:function(){var e=Object(ne.convertToRaw)(this.state.editor.getCurrentContent()),t=le()(e);console.log(t)}},{key:"render",value:function(){var e=this;return r.a.createElement(b.Panel,{id:this.props.id},r.a.createElement(b.PanelHeader,{left:r.a.createElement(b.HeaderButton,{onClick:this.props.goBack},ie===b.IOS?r.a.createElement(h.a,null):r.a.createElement(v.a,null))},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0442\u0430\u044c\u044e"),r.a.createElement(b.Group,{className:"quill-wrapper"},r.a.createElement(ae.Editor,{editorState:this.state.editor,toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:function(t){return e.setState({editor:t})},toolbar:se})),r.a.createElement(b.Group,null,r.a.createElement(b.Div,null,r.a.createElement("small",null,"\u0422\u0435\u0433\u0438 \u043a \u0441\u0442\u0430\u0442\u044c\u0435")),r.a.createElement(b.Div,null,this.state.tags.map(function(t){return r.a.createElement(b.Button,{className:"article-editor-tag",level:"outline",onClick:function(){return e.setState(function(e){return e.tags.splice(e.tags.indexOf(t),1),e})}},t)}),r.a.createElement(b.Button,{level:"outline",onClick:function(){return e.setState({newTagModalVisible:!0})}},"+"))),r.a.createElement(b.Div,{className:"double-buttons"},r.a.createElement(b.Button,{level:"outline"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0447\u0435\u0440\u043d\u043e\u0432\u0438\u043a"),r.a.createElement(b.Button,{onClick:function(){return e.save()}},"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c")),this.state.newTagModalVisible&&r.a.createElement(b.PopoutWrapper,{v:"center",h:"center",onClick:function(){return e.setState({newTagModalVisible:!1})}},r.a.createElement(b.Group,{className:"article-editor-tag-input",onClick:function(e){return e.stopPropagation()}},r.a.createElement("p",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u0433"),r.a.createElement(b.Input,{value:this.state.newTag,onChange:function(t){return e.setState({newTag:t.target.value})}}),r.a.createElement("br",null),r.a.createElement(b.Button,{level:"outline",onClick:function(){return e.setState({newTagModalVisible:!1,tags:e.state.tags.concat([e.state.newTag]),newTag:""})}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))}}]),t}(r.a.Component),se={options:["inline","blockType","list","link","emoji","image","history"],inline:{inDropdown:!1,className:void 0,component:void 0,dropdownClassName:void 0,options:["bold","italic","underline"],bold:{icon:ae.Editor.bold,className:void 0},italic:{icon:ae.Editor.italic,className:void 0}},blockType:{inDropdown:!0,options:["Normal","H1","H2","Blockquote","Code"],className:void 0,component:void 0,dropdownClassName:void 0},list:{inDropdown:!1,className:void 0,component:void 0,dropdownClassName:void 0,options:["unordered","ordered","indent","outdent"],unordered:{icon:ae.Editor.unordered,className:void 0},ordered:{icon:ae.Editor.ordered,className:void 0},indent:{icon:ae.Editor.indent,className:void 0},outdent:{icon:ae.Editor.outdent,className:void 0}},textAlign:{inDropdown:!1,className:void 0,component:void 0,dropdownClassName:void 0,options:["left","center","right","justify"],left:{icon:ae.Editor.left,className:void 0},center:{icon:ae.Editor.center,className:void 0},right:{icon:ae.Editor.right,className:void 0},justify:{icon:ae.Editor.justify,className:void 0}},colorPicker:{icon:ae.Editor.color,className:void 0,component:void 0,popupClassName:void 0,colors:["rgb(97,189,109)","rgb(26,188,156)","rgb(84,172,210)","rgb(44,130,201)","rgb(147,101,184)","rgb(71,85,119)","rgb(204,204,204)","rgb(65,168,95)","rgb(0,168,133)","rgb(61,142,185)","rgb(41,105,176)","rgb(85,57,130)","rgb(40,50,78)","rgb(0,0,0)","rgb(247,218,100)","rgb(251,160,38)","rgb(235,107,86)","rgb(226,80,65)","rgb(163,143,132)","rgb(239,239,239)","rgb(255,255,255)","rgb(250,197,28)","rgb(243,121,52)","rgb(209,72,65)","rgb(184,49,47)","rgb(124,112,107)","rgb(209,213,216)"]},link:{inDropdown:!1,className:void 0,component:void 0,popupClassName:void 0,dropdownClassName:void 0,showOpenOptionOnHover:!0,defaultTargetOption:"_self",options:["link","unlink"],link:{icon:ae.Editor.link,className:void 0},unlink:{icon:ae.Editor.unlink,className:void 0}},emoji:{icon:ae.Editor.emoji,className:void 0,component:void 0,popupClassName:void 0,emojis:["\ud83d\ude00","\ud83d\ude01","\ud83d\ude02","\ud83d\ude03","\ud83d\ude09","\ud83d\ude0b","\ud83d\ude0e","\ud83d\ude0d","\ud83d\ude17","\ud83e\udd17","\ud83e\udd14","\ud83d\ude23","\ud83d\ude2b","\ud83d\ude34","\ud83d\ude0c","\ud83e\udd13","\ud83d\ude1b","\ud83d\ude1c","\ud83d\ude20","\ud83d\ude07","\ud83d\ude37","\ud83d\ude08","\ud83d\udc7b","\ud83d\ude3a","\ud83d\ude38","\ud83d\ude39","\ud83d\ude3b","\ud83d\ude3c","\ud83d\ude3d","\ud83d\ude40","\ud83d\ude48","\ud83d\ude49","\ud83d\ude4a","\ud83d\udc7c","\ud83d\udc6e","\ud83d\udd75","\ud83d\udc82","\ud83d\udc73","\ud83c\udf85","\ud83d\udc78","\ud83d\udc70","\ud83d\udc72","\ud83d\ude4d","\ud83d\ude47","\ud83d\udeb6","\ud83c\udfc3","\ud83d\udc83","\u26f7","\ud83c\udfc2","\ud83c\udfcc","\ud83c\udfc4","\ud83d\udea3","\ud83c\udfca","\u26f9","\ud83c\udfcb","\ud83d\udeb4","\ud83d\udc6b","\ud83d\udcaa","\ud83d\udc48","\ud83d\udc49","\ud83d\udc49","\ud83d\udc46","\ud83d\udd95","\ud83d\udc47","\ud83d\udd96","\ud83e\udd18","\ud83d\udd90","\ud83d\udc4c","\ud83d\udc4d","\ud83d\udc4e","\u270a","\ud83d\udc4a","\ud83d\udc4f","\ud83d\ude4c","\ud83d\ude4f","\ud83d\udc35","\ud83d\udc36","\ud83d\udc07","\ud83d\udc25","\ud83d\udc38","\ud83d\udc0c","\ud83d\udc1b","\ud83d\udc1c","\ud83d\udc1d","\ud83c\udf49","\ud83c\udf44","\ud83c\udf54","\ud83c\udf64","\ud83c\udf68","\ud83c\udf6a","\ud83c\udf82","\ud83c\udf70","\ud83c\udf7e","\ud83c\udf77","\ud83c\udf78","\ud83c\udf7a","\ud83c\udf0d","\ud83d\ude91","\u23f0","\ud83c\udf19","\ud83c\udf1d","\ud83c\udf1e","\u2b50","\ud83c\udf1f","\ud83c\udf20","\ud83c\udf28","\ud83c\udf29","\u26c4","\ud83d\udd25","\ud83c\udf84","\ud83c\udf88","\ud83c\udf89","\ud83c\udf8a","\ud83c\udf81","\ud83c\udf97","\ud83c\udfc0","\ud83c\udfc8","\ud83c\udfb2","\ud83d\udd07","\ud83d\udd08","\ud83d\udce3","\ud83d\udd14","\ud83c\udfb5","\ud83c\udfb7","\ud83d\udcb0","\ud83d\udd8a","\ud83d\udcc5","\u2705","\u274e","\ud83d\udcaf"]},image:{icon:ae.Editor.image,className:void 0,component:void 0,popupClassName:void 0,urlEnabled:!0,uploadEnabled:!0,alignmentEnabled:!0,uploadCallback:void 0,previewImage:!1,inputAccept:"image/gif,image/jpeg,image/jpg,image/png,image/svg",alt:{present:!1,mandatory:!1},defaultSize:{height:"auto",width:"auto"}},history:{inDropdown:!1,className:void 0,component:void 0,dropdownClassName:void 0,options:["undo","redo"],undo:{icon:ae.Editor.undo,className:void 0},redo:{icon:ae.Editor.redo,className:void 0}}},oe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).open=function(e){te.go(e)},a.state={activePanel:"home",fetchedUser:null,currentArticle:null},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;te.subscribe(function(t){return e.setState({activePanel:t.slice(-1)[0]})}),te.init({initOpenAllowed:["home","feed","article","subscribe","publisher-account","article-editor"],onInitRedirect:{"get-one-article":"article","channel-preview":"subscribe","preview-feed":"home"}});var t=C();"undefined"!=typeof t.article&&(console.log(t.article),this.setState({currentArticle:t.article})),s.a.subscribe(function(t){switch(alert(JSON.stringify(t)),t.detail.type){case"VKWebAppGetUserInfoResult":e.setState({fetchedUser:t.detail.data})}}),s.a.send("VKWebAppGetUserInfo",{})}},{key:"render",value:function(){var e=this;return r.a.createElement(G.Provider,null,r.a.createElement(b.View,{activePanel:this.state.activePanel},r.a.createElement(E,{id:"home",fetchedUser:this.state.fetchedUser,open:te.go,goBack:te.back}),r.a.createElement(N,{id:"feed",fetchedUser:this.state.fetchedUser,open:this.open,goBack:te.back,setArticle:function(t){return e.setState({currentArticle:t})}}),r.a.createElement(A,{id:"article",open:te.go,article:this.state.currentArticle,user:this.state.fetchedUser,goBack:te.back}),r.a.createElement(M,{id:"subscribe",open:te.go,articleData:this.state.currentArticleData,goBack:te.back}),r.a.createElement(F,{id:"get-one-article",open:te.go,article:this.state.currentArticleData,goBack:te.back}),r.a.createElement(z,{id:"channel-preview",open:te.go,goBack:te.back}),r.a.createElement(Y,{id:"publisher-account",open:te.go,goBack:te.back}),r.a.createElement(ce,{id:"article-editor",open:te.go,goBack:te.back})))}}]),t}(r.a.Component);function ue(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var pe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.send("VKWebAppInit",{}),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");pe?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ue(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ue(e)})}}(),i.a.render(r.a.createElement(oe,null),document.getElementById("root"))}},[[192,2,1]]]);
//# sourceMappingURL=main.a49e3d59.chunk.js.map